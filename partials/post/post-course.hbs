{{#contentFor "body-class"}} post-template-course{{/contentFor}}

<style>
    /* --- Layout --- */
    .course-layout-grid {
        display: grid;
        grid-template-columns: 1fr 360px;
        gap: var(--spacing-9);
        margin-top: var(--spacing-9);
        align-items: start;
    }

    /* --- Hero --- */
    .course-hero-section {
        background-color: var(--color-background-100);
        border-radius: var(--radius-5);
        padding: var(--spacing-9);
        border: 1px solid var(--color-border);
        position: relative;
        overflow: hidden;
    }
    .hero-grid {
        display: grid;
        grid-template-columns: 1.3fr 0.7fr;
        align-items: center;
        gap: var(--spacing-9);
        position: relative;
        z-index: 2;
    }
    .hero-title {
        font-size: clamp(2rem, 4vw, 3.5rem);
        font-weight: 800;
        line-height: 1.1;
        margin-bottom: var(--spacing-5);
        color: var(--color-contrast);
    }
    .hero-image-wrapper {
        position: relative;
        border-radius: var(--radius-4);
        overflow: hidden;
        box-shadow: var(--shadow);
        aspect-ratio: 16/9;
    }
    .hero-image-wrapper img { width: 100%; height: 100%; object-fit: cover; }

    /* --- Curriculum --- */
    .lesson-row {
        display: flex;
        align-items: center;
        padding: var(--spacing-4);
        border: 1px solid var(--color-border);
        border-radius: var(--radius-3);
        background-color: var(--color-background);
        text-decoration: none;
        margin-bottom: var(--spacing-4);
        transition: transform 0.2s, border-color 0.2s;
    }
    .lesson-row:hover {
        border-color: var(--color-contrast);
        transform: translateY(-2px);
    }
    .lesson-number {
        font-size: 1.5rem;
        font-weight: 800;
        color: var(--color-border);
        margin-right: var(--spacing-5);
        width: 30px;
        text-align: center;
    }
    .lesson-thumb {
        width: 90px; height: 60px;
        border-radius: var(--radius-2);
        object-fit: cover;
        margin-right: var(--spacing-5);
        background-color: var(--color-background-300);
    }
    .lesson-info { flex: 1; }
    .lesson-title {
        display: block;
        font-weight: var(--font-weight-semibold);
        color: var(--color-contrast);
        font-size: 1rem;
    }
    .lesson-meta {
        font-size: 0.75rem;
        color: var(--color-secondary);
        margin-top: 4px;
    }
    .lesson-status {
        padding: 4px 10px;
        border-radius: 20px;
        background: var(--color-background-200);
        color: var(--color-secondary);
        font-size: 0.7rem;
        font-weight: 700;
        text-transform: uppercase;
    }
    .lesson-row.unlocked .lesson-status {
        background: var(--ghost-accent-color);
        color: #fff;
    }

    /* --- Sidebar --- */
    .sticky-sidebar { position: sticky; top: 100px; }
    .info-card {
        padding: var(--spacing-7);
        background-color: var(--color-background-100);
        border: 1px solid var(--color-border);
        border-radius: var(--radius-4);
    }
    .info-list li {
        display: flex; justify-content: space-between;
        padding: 12px 0;
        border-bottom: 1px solid var(--color-border);
        font-size: var(--font-small);
        color: var(--color-foreground);
    }
    .info-list li:last-child { border-bottom: none; }

    /* --- Responsive --- */
    @media (max-width: 991px) {
        .course-layout-grid { grid-template-columns: 1fr; }
        .hero-grid { grid-template-columns: 1fr; }
        .course-sidebar { order: 2; }
    }
</style>

<div class="container-wide" style="margin-top: var(--spacing-9);">
    
    {{!-- HERO --}}
    <div class="course-hero-section">
        <div class="hero-grid">
            <div class="hero-content">
                {{#if primary_tag}}
                    <span style="font-size: var(--font-x-small); font-weight:700; text-transform:uppercase; color:var(--ghost-accent-color); border:1px solid var(--color-border); padding:4px 10px; border-radius:20px; background:var(--color-background);">
                        {{primary_tag.name}}
                    </span>
                {{/if}}
                
                <h1 class="hero-title" style="margin-top: var(--spacing-5);">{{title}}</h1>
                
                <p style="font-size: var(--font-large); color: var(--color-secondary); margin-bottom: var(--spacing-7); line-height: 1.5;">
                    {{custom_excerpt}}
                </p>
                
                <div style="display:flex; gap:20px; font-size:var(--font-small); color:var(--color-secondary); margin-bottom: var(--spacing-7);">
                    <span>Updated: <strong>{{date format="MMMM YYYY"}}</strong></span>
                    <span>Language: <strong>English</strong></span>
                </div>

                <div>
                    <a href="#curriculum" class="button button-rounded">
                        {{t "Start Learning"}}
                        <svg style="width:18px; height:18px; margin-left:8px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                    </a>
                </div>
            </div>

            <div class="hero-media">
                {{#if feature_image}}
                <div class="hero-image-wrapper">
                    <img src="{{img_url feature_image}}" alt="{{title}}">
                </div>
                {{/if}}
            </div>
        </div>
    </div>

    {{!-- GRID --}}
    <div class="course-layout-grid">

        {{!-- LEFT: CONTENT --}}
        <div class="course-main">
            
            {{!-- About --}}
            <div class="post-content">
                <h2>{{t "About this Course"}}</h2>
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:15px; margin: 20px 0;">
                    <div style="display:flex; gap:10px;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-success)" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        <span style="font-size:var(--font-small);">Expert-led instruction</span>
                    </div>
                    <div style="display:flex; gap:10px;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-success)" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        <span style="font-size:var(--font-small);">Real-world examples</span>
                    </div>
                    <div style="display:flex; gap:10px;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-success)" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        <span style="font-size:var(--font-small);">Self-paced learning</span>
                    </div>
                    <div style="display:flex; gap:10px;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--color-success)" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        <span style="font-size:var(--font-small);">Certificate of completion</span>
                    </div>
                </div>
                
                {{content}}
            </div>

            {{!-- Curriculum --}}
            <div id="curriculum" style="margin-top: var(--spacing-9);">
                <h2 style="margin-bottom:var(--spacing-6);">{{t "Course Curriculum"}}</h2>

                <div class="curriculum-list">
                    {{!-- Loop through lessons --}}
                    {{#get "posts" filter="tags:hash-lesson+tags:{{primary_tag.slug}}" order="published_at asc" include="tags"}}
                        {{#foreach posts}}
                        <a href="{{url}}" class="lesson-row {{#if access}}unlocked{{/if}}">
                            <span class="lesson-number">{{@number}}</span>
                            
                            {{#if feature_image}}
                                <img src="{{img_url feature_image size="xs"}}" class="lesson-thumb" alt="{{title}}">
                            {{else}}
                                <div class="lesson-thumb" style="display:flex; align-items:center; justify-content:center;">
                                    <svg width="24" height="24" fill="none" stroke="currentColor" opacity="0.5"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                                </div>
                            {{/if}}

                            <div class="lesson-info">
                                <span class="lesson-title">{{title}}</span>
                                <div class="lesson-meta">
                                    {{reading_time}} 
                                    {{#foreach tags visibility="internal"}}
                                        {{#match slug "~^" "hash-lesson-duration-"}}
                                            &bull; {{description}}
                                        {{/match}}
                                    {{/foreach}}
                                </div>
                            </div>

                            <div class="lesson-status">
                                {{#if access}}Play{{else}}Locked{{/if}}
                            </div>
                        </a>
                        {{/foreach}}
                    {{/get}}
                </div>
            </div>
        </div>

        {{!-- RIGHT: SIDEBAR --}}
        <aside class="course-sidebar">
            <div class="sticky-sidebar">
                <div class="info-card">
                    <h3 style="font-size:1.2rem; margin-bottom:var(--spacing-5);">{{t "Course Details"}}</h3>
                    
                    <ul class="info-list" style="list-style:none; padding:0; margin:0;">
                        {{!-- Duration Tag --}}
                        {{#foreach tags visibility="internal"}}
                            {{#match slug "~^" "hash-course-duration-"}}
                            <li>
                                <span>Duration</span> <strong>{{description}}</strong>
                            </li>
                            {{/match}}
                            {{#match slug "~^" "hash-course-level-"}}
                            <li>
                                <span>Level</span> <strong>{{description}}</strong>
                            </li>
                            {{/match}}
                        {{/foreach}}
                        <li>
                            <span>Access</span> <strong>Lifetime</strong>
                        </li>
                    </ul>

                    {{!-- Instructor Profile --}}
                    <div style="margin-top: var(--spacing-7); padding-top: var(--spacing-6); border-top:1px solid var(--color-border);">
                        <h4 style="font-size:0.9rem; text-transform:uppercase; color:var(--color-secondary); margin-bottom:10px;">Instructors</h4>
                        {{#foreach authors}}
                        <div style="display:flex; align-items:center; gap:12px; margin-bottom:10px;">
                            <a href="{{url}}" class="avatar" style="width:40px; height:40px;">
                                {{#if profile_image}}
                                    <img src="{{img_url profile_image}}" alt="{{name}}" style="border-radius:50%;">
                                {{else}}
                                    <span style="display:block; width:100%; height:100%; background:var(--color-background-200); border-radius:50%; text-align:center; line-height:40px;">{{name.[0]}}</span>
                                {{/if}}
                            </a>
                            <div>
                                <a href="{{url}}" style="font-weight:bold; color:var(--color-contrast); text-decoration:none;">{{name}}</a>
                                <div style="font-size:0.75rem; color:var(--color-secondary);">{{location}}</div>
                            </div>
                        </div>
                        {{/foreach}}
                    </div>
                </div>
            </div>
        </aside>

    </div>
</div>