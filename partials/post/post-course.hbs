{{#contentFor "body-class"}} post-template-course{{/contentFor}}

<style>
    .course-layout { display: grid; grid-template-columns: 1fr 360px; gap: var(--spacing-9); margin-top: var(--spacing-9); }
    .course-hero { background: var(--color-background-100); border-radius: var(--radius-5); padding: var(--spacing-9); border: 1px solid var(--color-border); position: relative; overflow: hidden; margin-top: var(--spacing-8); }
    .hero-inner { display: grid; grid-template-columns: 1.4fr 0.6fr; gap: var(--spacing-9); align-items: center; position: relative; z-index: 2; }
    .hero-title { font-size: clamp(2rem, 4vw, 3rem); font-weight: 800; line-height: 1.1; color: var(--color-contrast); margin-bottom: var(--spacing-4); }
    .course-poster { position: relative; border-radius: var(--radius-4); overflow: hidden; box-shadow: var(--shadow); aspect-ratio: 16/9; background: #000; }
    .course-poster img { width: 100%; height: 100%; object-fit: cover; }
    
    /* Curriculum */
    .lesson-card { display: flex; align-items: center; padding: var(--spacing-4); background: var(--color-background); border: 1px solid var(--color-border); border-radius: var(--radius-3); text-decoration: none; margin-bottom: var(--spacing-3); transition: 0.2s; }
    .lesson-card:hover { border-color: var(--color-contrast); transform: translateY(-2px); }
    .lesson-thumb { width: 100px; height: 60px; border-radius: var(--radius-2); object-fit: cover; margin-right: var(--spacing-5); background: var(--color-background-300); flex-shrink: 0; }
    .lesson-info { flex: 1; }
    .lesson-name { font-weight: 600; color: var(--color-contrast); display: block; font-size: 1rem; }
    .lesson-meta { font-size: 0.75rem; color: var(--color-secondary); margin-top: 4px; }
    .lesson-status { background: var(--color-background-200); color: var(--color-secondary); font-size: 0.7rem; font-weight: 700; text-transform: uppercase; padding: 4px 10px; border-radius: 20px; }
    .lesson-card.unlocked .lesson-status { background: var(--ghost-accent-color); color: #fff; }

    /* Sidebar */
    .sidebar-sticky { position: sticky; top: 100px; }
    .info-card { background: var(--color-background-100); padding: var(--spacing-7); border-radius: var(--radius-4); border: 1px solid var(--color-border); }
    .detail-list li { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--color-border); font-size: 0.9rem; color: var(--color-foreground); }
    .detail-list li:last-child { border-bottom: none; }

    @media (max-width: 991px) { .course-layout, .hero-inner { grid-template-columns: 1fr; } .course-poster { order: -1; margin-bottom: 20px; } .course-sidebar { order: 2; } }
</style>

<div class="container-wide">
    <div class="course-hero">
        <div class="hero-inner">
            <div class="hero-text">
                <span style="font-size:0.7rem; font-weight:700; text-transform:uppercase; color:var(--ghost-accent-color); border:1px solid var(--color-border); padding:4px 10px; border-radius:20px; background:var(--color-background); margin-bottom: var(--spacing-4); display:inline-block;">
                    {{#if primary_tag}}{{primary_tag.name}}{{else}}Course{{/if}}
                </span>
                <h1 class="hero-title">{{title}}</h1>
                <p style="font-size:1.15rem; line-height:1.6; color:var(--color-secondary); margin-bottom:var(--spacing-7);">{{custom_excerpt}}</p>
                <a href="#curriculum" class="button button-rounded">{{t "Start Learning"}}</a>
            </div>
            <div class="hero-media">
                <div class="course-poster">
                    {{#if feature_image}}<img src="{{img_url feature_image size="l"}}" alt="{{title}}">{{/if}}
                </div>
            </div>
        </div>
    </div>

    <div class="course-layout">
        <div class="course-content">
            <div class="post-content">
                <h2>{{t "About this Course"}}</h2>
                {{content}}
            </div>

            <div id="curriculum" style="margin-top: var(--spacing-9);">
                <h2 style="margin-bottom: var(--spacing-6);">{{t "Curriculum"}}</h2>
                {{#if primary_tag}}
                    {{#get "posts" filter=(concat "tags:hash-lesson+tags:" primary_tag.slug) order="published_at asc" include="tags"}}
                        {{#foreach posts}}
                        <a href="{{url}}" class="lesson-card {{#if access}}unlocked{{/if}}">
                            {{#if feature_image}}<img src="{{img_url feature_image size="xs"}}" class="lesson-thumb" alt="">{{/if}}
                            <div class="lesson-info">
                                <span class="lesson-name">{{title}}</span>
                                <div class="lesson-meta">
                                    {{reading_time}} 
                                    {{#foreach tags visibility="internal"}}
                                        {{#match slug "~^" "hash-lesson-duration-"}} &bull; {{description}}{{/match}}
                                    {{/foreach}}
                                </div>
                            </div>
                            <span class="lesson-status">{{#if access}}Play{{else}}Locked{{/if}}</span>
                        </a>
                        {{/foreach}}
                    {{/get}}
                {{else}}
                    <p>{{t "Add a primary tag to this course to see lessons."}}</p>
                {{/if}}
            </div>
        </div>

        <aside class="course-sidebar">
            <div class="sidebar-sticky">
                <div class="info-card">
                    <h3 style="font-size:1.2rem; margin-bottom:var(--spacing-5);">{{t "Course Details"}}</h3>
                    <ul class="detail-list" style="list-style:none; padding:0; margin:0;">
                        {{#foreach tags visibility="internal"}}
                            {{#match slug "~^" "hash-course-duration-"}}<li><span>Duration</span><strong>{{description}}</strong></li>{{/match}}
                            {{#match slug "~^" "hash-course-level-"}}<li><span>Level</span><strong>{{description}}</strong></li>{{/match}}
                        {{/foreach}}
                        <li><span>Access</span><strong>Lifetime</strong></li>
                        <li><span>Certificate</span><strong>Yes</strong></li>
                    </ul>
                </div>
            </div>
        </aside>
    </div>
</div>