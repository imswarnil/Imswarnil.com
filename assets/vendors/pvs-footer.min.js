(function(V){typeof define=="function"&&define.amd?define(V):V()})(function(){"use strict";const{on:V}=window.ivent;function We(){V(document,"click","[data-clipboard-text]",async i=>{i.preventDefault();try{await navigator.clipboard.writeText(i.delegateTarget.getAttribute("data-clipboard-text"))}catch(e){console.error(e)}})}const{on:Xe}=window.ivent;function Ye(){document.querySelectorAll(".collapse").forEach(i=>{if(getComputedStyle(i).visibility!=="hidden"){const e=i.parentNode.querySelector(".collapse-toggle");e.ariaExpanded="true"}i.classList.add("collapse-ready")}),Xe(document,"click",".collapse-toggle",i=>{i.preventDefault();const e=i.delegateTarget,t=e.parentNode.querySelector(".collapse:not(.collapse-ready)");t?t.classList.add("collapse-ready"):(!t||t&&getComputedStyle(t).visibility==="hidden")&&(e.ariaExpanded=String(e.ariaExpanded!=="true"))})}const{on:re,trigger:_e}=window.ivent;function oe(){return document.documentElement.getAttribute("data-color-scheme")}function se(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function ce(){const i=oe();return i==="system"?se():i}function W(i){document.documentElement.setAttribute("data-color-scheme",i),localStorage.setItem("color-scheme",i)}let le=!1;function ue(){const i=document.querySelector('script[src*="comments-ui"]');if(!i)return;const e=ce();i.setAttribute("data-color-scheme",e),le||(le=i.getAttribute("data-accent-color")==="#000000"),le&&i.setAttribute("data-accent-color",e==="dark"?"#525252":"#000000")}function Je(){re(document,"click",".toggle-color-scheme-button",i=>{i.preventDefault();const e=i.delegateTarget.getAttribute("value"),t=oe(),a=ce();if(t!==e){if(document.documentElement.classList.add("stop-transition"),/(?=.*dark)(?=.*light)(?=.*system)/g.test(e)){const n=se()==="dark"?["dark","system","light"]:["light","system","dark"],o=n[n.indexOf(t)+1]||n[0];W(o)}else/(?=.*dark)(?=.*light)/g.test(e)?W(a==="dark"?"light":"dark"):W(e);_e(document,"pvs.dark-mode.toggle"),document.documentElement.offsetHeight,document.documentElement.classList.remove("stop-transition")}}),ue(),re(window,"load",()=>{ue()}),re(document,"pvs.dark-mode.toggle pvs.navigation.content-rendered",()=>{ue()})}const{on:M}=window.ivent,Qe={selector:".dropdown",toggleSelector:".dropdown-toggle",preventCloseSelector:".toggle-color-scheme-button, .collapse-toggle"};function et(i){const e={...Qe,...i};let t=null,a=null;function n(d){t&&o(),a=d,a.setAttribute("aria-expanded","true"),t=d.parentNode.querySelector(`:scope > ${e.selector}`),t.classList.add("show")}function o(){t&&(t.classList.remove("show"),a.setAttribute("aria-expanded","false"),a=null,t=null)}function r(d){d.preventDefault();const p=d.delegateTarget;t&&p===a?o():n(p)}function l(d){if(!t)return;const p=d.target,m=t.contains(p),w=a.contains(p),F=p.closest(e.preventCloseSelector),k=p.matches("a, button")||p.closest("a, button");if(!(w||F)){if(!m){o();return}k&&o()}}function u(d){d.key==="Escape"&&t&&(a.focus(),o())}function h(){t&&requestAnimationFrame(()=>{if(!t)return;const d=document.activeElement;!t.contains(d)&&d!==a&&o()})}function g(){document.querySelectorAll(e.selector).forEach(d=>{d.classList.contains("dropdown-ready")||(d.classList.add("dropdown-ready"),window.getComputedStyle(d).opacity==="1"&&!d.classList.contains("show")&&n(d.parentNode.querySelector(e.toggleSelector)))})}g(),M(document,"pvs.navigation.content-rendered pvs.filter.rendered pvs.pagination.rendered",g),M(document,"click",e.toggleSelector,r),M(document,"click",l),M(document,"keyup",u),M(document,"focusout",`${e.selector}, ${e.toggleSelector}`,h)}const{on:we}=window.ivent,tt=["youtube.com","youtube-nocookie.com","player.vimeo.com","kickstarter.com","dailymotion.com","wistia.com","wistia.net","twitch.tv","clips.twitch.tv","facebook.com","tiktok.com","instagram.com","iframe.mediadelivery.net","video.bunnycdn.com"],X=tt.map(i=>`[src*="${i}"]`).join(","),it=`
	.tag-hash-video .post-content > .kg-video-card:first-child,
	.tag-hash-video .post-content > .kg-embed-card:first-child:has(> iframe:where(${X})),
	.tag-hash-video .post-content > iframe:first-child:where(${X})
`,at=`
	.kg-video-card:first-child video,
	.kg-embed-card:first-child:has(> iframe:where(${X})),
	iframe:first-child:where(${X})
`,O={media:"post-media",mediaCard:"post-card-media",featuredVideo:"post-featured-video",ready:"post-featured-video-ready"};function Se(){document.querySelectorAll(it).forEach(i=>{const e=i.closest("article"),t=e.querySelector(`.${O.media}`);t.querySelector(`.${O.featuredVideo}`)||(t.append(i),i.classList.add(O.featuredVideo),e.classList.add(O.ready))})}function nt(i){i.matches("video:not([loop])")&&(i.setAttribute("loop",""),i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.setAttribute("playsinline",""))}function rt(i){const e=i.tagName==="IFRAME"&&(i.src.includes("youtube.com")||i.src.includes("youtube-nocookie.com"))?i:i.querySelector('iframe[src*="youtube.com"], iframe[src*="youtube-nocookie.com"]');if(!e)return;const t=new URL(e.src);t.searchParams.set("autoplay","1"),t.searchParams.set("mute","1"),t.searchParams.set("loop","1");const a=t.pathname.split("/").pop();t.searchParams.set("playlist",a),t.searchParams.set("controls","0"),t.searchParams.set("modestbranding","1"),t.searchParams.set("rel","0"),e.src=t.toString()}function ot(i){const e=i.tagName==="IFRAME"&&i.src.includes("vimeo.com")?i:i.querySelector('iframe[src*="vimeo.com"]');if(!e)return;const t=new URL(e.src);t.searchParams.set("autoplay","1"),t.searchParams.set("muted","1"),t.searchParams.set("loop","1"),t.searchParams.set("background","1"),e.src=t.toString()}function Te(){document.querySelectorAll(`.${O.mediaCard} > template`).forEach(i=>{const e=i.content.querySelector(at);e&&(nt(e),rt(e),ot(e),e.classList.add(O.featuredVideo),i.after(e.cloneNode(!0))),i.remove()})}function st(){Se(),we(document,"ready pvs.pagination.rendered pvs.navigation.content-rendered",Se)}function ct(){Te(),we(document,"ready pvs.pagination.rendered pvs.navigation.content-rendered",Te)}function de(i,e,t){var a=t||{},n=a.noTrailing,o=n===void 0?!1:n,r=a.noLeading,l=r===void 0?!1:r,u=a.debounceMode,h=u===void 0?void 0:u,g,d=!1,p=0;function m(){g&&clearTimeout(g)}function w(k){var L=k||{},A=L.upcomingOnly,z=A===void 0?!1:A;m(),d=!z}function F(){for(var k=arguments.length,L=new Array(k),A=0;A<k;A++)L[A]=arguments[A];var z=this,G=Date.now()-p;if(d)return;function $(){p=Date.now(),e.apply(z,L)}function H(){g=void 0}!l&&h&&!g&&$(),m(),h===void 0&&G>i?l?(p=Date.now(),o||(g=setTimeout(h?H:$,i))):$():o!==!0&&(g=setTimeout(h?H:$,h===void 0?i-G:i))}return F.cancel=w,F}function he(i,e,t){var a={},n=a.atBegin,o=n===void 0?!1:n;return de(i,e,{debounceMode:o!==!1})}const Y={duration:.5,selectors:{default:".lightbox, .kg-image-card img, .kg-gallery-image img",gallery:".kg-gallery-container"},labels:{trigger:"Open lightbox",close:"Close Zoom",buttonNext:"Next Image",buttonPrev:"Previous Image",counter:"Gallery position"},classes:{trigger:"lightbox-trigger",zooming:"lightbox-zooming",overlay:"lightbox-overlay",close:"lightbox-button-close",buttonNext:"lightbox-button-next",buttonPrev:"lightbox-button-prev",counter:"lightbox-counter"}};let lt=class{constructor(e,t){this.name="lightbox",this.config={...Y,selectors:{...Y.selectors,default:Y.selectors.default+(e?`, ${e}`:""),gallery:Y.selectors.gallery+(t?`, ${t}`:"")}},this.state={image:null,trigger:null,body:document.body,isZoom:!1,isGallery:!1,rect:{},current:{x:0,y:0,scale:0}},this.ui={close:null,overlay:null,buttonNext:null,buttonPrev:null,counter:null},this.hideTimer=null,this.isNavigating=!1,this.lastNavigateTime=0,this.animationTimeouts=new Set,this.gallery={images:[],currentIndex:0,totalImages:0},this.drag={isStarted:!1,isActive:!1,startX:0,startY:0,initialX:0,direction:null},this.init()}init(){const{on:e}=window.ivent;this.createUI(),this.update(),e(document,"click",this.config.selectors.default,this.handleClick.bind(this)),e(document,"click",`.${this.config.classes.trigger}`,this.handleClick.bind(this)),e(document,"keydown",`.${this.config.classes.trigger}`,this.handleClick.bind(this)),e(document,"keydown",this.handleKeydown.bind(this)),e(window,"scroll",this.handleScroll.bind(this)),e(window,"resize",he(100,this.handleResize.bind(this))),e(window,"onload",this.handleResize.bind(this)),e(document,"pvs.pagination.rendered pvs.navigation.content-rendered",this.update.bind(this)),e(document,"touchstart",this.handleDragStart.bind(this)),e(document,"touchmove",this.handleDragMove.bind(this)),e(document,"touchend",this.handleDragEnd.bind(this)),e(document,"mousedown",this.handleDragStart.bind(this)),e(document,"mousemove",this.handleDragMove.bind(this)),e(document,"mouseup",this.handleDragEnd.bind(this)),e(document,"mousemove",this.handleUserActivity.bind(this))}handleClick(e){if(e.detail===0&&e.key!=="Enter"||this.isNavigating)return;const t=e.delegateTarget,a=t.classList.contains(this.config.classes.trigger);t.closest("a")||(this.state.image=a?t.nextElementSibling:t,this.state.trigger=a?t:t.previousElementSibling,this.state.isZoom?this.close(e):this.open(e))}handleKeydown(e){this.state.isZoom&&(this.handleUserActivity(),e.key==="Escape"&&this.close(e),this.state.isGallery&&(e.key==="ArrowRight"||e.key==="ArrowLeft")&&(e.preventDefault(),this.navigate(e.key==="ArrowRight"?1:-1)),e.key==="Tab"&&(e.preventDefault(),this.handleTabNavigation(e.shiftKey)))}handleTabNavigation(e){const{close:t,buttonNext:a,buttonPrev:n}=this.ui,o=[t,a,n].filter((u,h)=>h===0||u.ariaExpanded==="true"),r=e?-1:1,l=(o.findIndex(u=>u===document.activeElement)+r+o.length)%o.length;o[l].focus()}handleResize(){this.state.isZoom&&(this.calculateZoom(this.state.rect),this.applyTransform())}handleScroll(e){!this.state.isZoom||this.isNavigating||this.drag.isActive||this.close(e)}handleDragStart(e){if(!this.state.isZoom)return;const t=this.getEventCoords(e);t&&(this.drag.isStarted=!0,this.drag.startX=t.x,this.drag.startY=t.y,this.drag.initialX=this.state.isGallery?this.state.current.x:0,this.handleUserActivity(),e.preventDefault())}handleDragMove(e){if(!this.state.isZoom||!this.drag.isStarted&&!this.drag.isActive)return;const t=this.getEventCoords(e);if(!t)return;const a=t.x-this.drag.startX,n=t.y-this.drag.startY,o=Math.sqrt(a*a+n*n);!this.drag.isActive&&o>10&&(this.determineDragDirection(a,n),this.activateDrag()),this.drag.isActive&&(this.applyDragMovement(a,n),e.preventDefault())}handleDragEnd(e){if(!this.state.isZoom||!this.drag.isStarted&&!this.drag.isActive)return;const t=this.drag.isActive,a=this.drag.direction;if(this.resetDragState(),!t){setTimeout(()=>{this.isNavigating=!1},50);return}const n=this.getEventCoords(e);if(!n)return;const o=n.x-this.drag.startX,r=n.y-this.drag.startY;a==="vertical"?this.handleVerticalDragEnd(r,e):a==="horizontal"&&this.state.isGallery?this.handleHorizontalDragEnd(o):setTimeout(()=>{this.isNavigating=!1},100)}getEventCoords(e){if(e.type.startsWith("touch")){if(e.touches&&e.touches.length>0)return{x:e.touches[0].clientX,y:e.touches[0].clientY};if(e.changedTouches&&e.changedTouches.length>0)return{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}}else return{x:e.clientX,y:e.clientY};return null}animateToPosition(e,t,a,n=400){this.state.image.style.transition=`translate ${n}ms cubic-bezier(0.34, 1.56, 0.64, 1)`,this.state.image.style.translate=`${e}px ${t}px`,setTimeout(()=>{this.state.image&&(this.state.image.style.transition=""),a&&a()},n)}snapBackToPosition(){this.animateToPosition(this.state.current.x,this.state.current.y)}resetDragState(){this.drag.isActive=!1,this.drag.isStarted=!1,this.drag.direction=null}determineDragDirection(e,t){Math.abs(t)>Math.abs(e)*1.5?this.drag.direction="vertical":Math.abs(e)>Math.abs(t)*1.5?this.drag.direction="horizontal":this.drag.direction=this.state.isGallery?"horizontal":"vertical"}activateDrag(){this.drag.isActive=!0,this.isNavigating=!0,this.state.image.style.transition="none"}applyDragMovement(e,t){if(this.drag.direction==="horizontal"&&this.state.isGallery){const a=this.drag.initialX+e;this.state.image.style.translate=`${a}px ${this.state.current.y}px`}else if(this.drag.direction==="vertical"){const a=this.state.current.y+t;this.state.image.style.translate=`${this.state.current.x}px ${a}px`}}handleVerticalDragEnd(e,t){this.state.image.style.transition="",Math.abs(e)>100?(this.isNavigating=!1,this.close(t),this.isNavigating=!0,setTimeout(()=>{this.isNavigating=!1},200)):this.animateToPosition(this.state.current.x,this.state.current.y,()=>{this.isNavigating=!1})}handleHorizontalDragEnd(e){if(this.state.image.style.transition="",Math.abs(e)>80){const t=e>0?-1:1,a=this.gallery.currentIndex,n=this.gallery.totalImages;if(t===1&&a<n-1||t===-1&&a>0){this.navigate(t);return}}this.snapBackToPosition(),setTimeout(()=>{this.isNavigating=!1},100)}handleUserActivity(){this.state.isZoom&&(this.isNavigating||(this.showControls(),clearTimeout(this.hideTimer),this.hideTimer=setTimeout(()=>{this.hideControls()},3e3)))}createUI(){const e=(a,n)=>{const o=document.createElement("button");return o.ariaLabel=this.config.labels[a]||"",o.className=this.config.classes[a],o.addEventListener("click",n),document.body.appendChild(o),o},t=()=>{const a=document.createElement("div");return a.ariaLabel=this.config.labels.counter||"",a.ariaLive="polite",a.className=this.config.classes.counter,document.body.appendChild(a),a};this.ui={overlay:e("overlay",this.close.bind(this)),close:e("close",this.close.bind(this)),buttonNext:e("buttonNext",()=>this.navigate(1)),buttonPrev:e("buttonPrev",()=>this.navigate(-1)),counter:t()}}update(){document.querySelectorAll(`${this.config.selectors.default}:not(.${this.name})`).forEach(e=>{if(e.closest("a"))return;e.classList.add(this.name);const t=this.createTrigger();e.before(t)})}createTrigger(){const e=document.createElement("button");return e.classList.add(this.config.classes.trigger),e.type="button",e.ariaLabel=this.config.labels.trigger,e.ariaExpanded="false",e}open(e){const t=this.state.image,a=t.getBoundingClientRect();this.state.isZoom=!0,this.state.rect=a,this.calculateZoom(a),this.applyTransform(),document.documentElement.classList.add("with-lightbox");const n=t.closest(this.config.selectors.gallery);if(n){const o=Array.from(n.querySelectorAll(this.config.selectors.default));this.gallery.images=o,this.gallery.totalImages=o.length,this.gallery.currentIndex=o.indexOf(t),this.state.isGallery=!0,this.showGalleryButtons(),this.updateCounter(),t.classList.add("lightbox-gallery")}t.classList.add(this.config.classes.zooming),setTimeout(()=>{this.state.image===t&&t.classList.remove(this.config.classes.zooming)},this.config.duration*1e3),this.setAriaExpanded(!0,this.state.trigger,this.ui.close,this.ui.overlay),setTimeout(()=>{this.ui.close.focus({preventScroll:!0}),e.detail!==0&&this.ui.close.blur()},0),this.handleUserActivity()}calculateZoom(e){const{innerWidth:t,innerHeight:a}=window,{width:n,height:o,left:r,top:l}=e,u=t/n,h=a/o,g=Math.min(u,h),d=t/2-(r+n/2),p=a/2-(l+o/2);this.state.current={scale:g,x:d,y:p}}applyTransform(){const{x:e,y:t,scale:a}=this.state.current;this.state.image.style.scale=a,this.state.image.style.translate=`${e}px ${t}px`}close(e){if(this.isNavigating)return;const t=this.state.image;if(!t)return;t.style.transitionDuration="",t.style.scale="",t.style.translate="",t.classList.add(this.config.classes.zooming);const a=t;setTimeout(()=>{a!==this.state.image&&a.classList.remove(this.config.classes.zooming)},this.config.duration*1e3),t.classList.remove("lightbox-gallery"),this.state.image=null,this.state.isZoom=!1,this.state.isGallery=!1,this.ui.counter&&(this.ui.counter.ariaExpanded="false"),clearTimeout(this.hideTimer),document.documentElement.classList.remove("with-lightbox"),this.clearAnimationTimeouts(),this.state.isGallery&&this.gallery.images.forEach(n=>{n!==t&&this.resetImageState(n)}),this.setAriaExpanded(!1,this.state.trigger,this.ui.overlay,this.ui.close,this.ui.buttonNext,this.ui.buttonPrev),this.state.trigger.focus({preventScroll:!0}),e.detail!==0&&setTimeout(()=>{this.state.trigger.blur()},0)}showGalleryButtons(){const e=this.gallery.currentIndex,t=this.gallery.totalImages;e<t-1?this.ui.buttonNext.ariaExpanded="true":this.ui.buttonNext.ariaExpanded="false",e>0?this.ui.buttonPrev.ariaExpanded="true":this.ui.buttonPrev.ariaExpanded="false"}updateCounter(){if(!this.state.isGallery||!this.ui.counter)return;const e=this.gallery.currentIndex+1,t=this.gallery.totalImages;this.ui.counter.textContent=`${e} of ${t}`,this.ui.counter.ariaExpanded="true"}showControls(){const{close:e,buttonNext:t,buttonPrev:a,counter:n}=this.ui;e.classList.remove("lightbox-controls-hidden"),t.ariaExpanded==="true"&&t.classList.remove("lightbox-controls-hidden"),a.ariaExpanded==="true"&&a.classList.remove("lightbox-controls-hidden"),n.ariaExpanded==="true"&&n.classList.remove("lightbox-controls-hidden")}hideControls(){if(!this.state.isZoom||document.activeElement&&(document.activeElement===this.ui.close||document.activeElement===this.ui.buttonNext||document.activeElement===this.ui.buttonPrev))return;const{close:e,buttonNext:t,buttonPrev:a,counter:n}=this.ui;e.classList.add("lightbox-controls-hidden"),t.classList.add("lightbox-controls-hidden"),a.classList.add("lightbox-controls-hidden"),n.ariaExpanded==="true"&&n.classList.add("lightbox-controls-hidden")}getHidePosition(e){const{rect:t,current:a}=this.state,n=window.innerWidth,o=t.width*a.scale,r=o+n/2-o/2;return e===1?-r+a.x:r+a.x}navigate(e){const t=Date.now();if(t-this.lastNavigateTime<150)return;this.lastNavigateTime=t;const{image:a}=this.state,{images:n}=this.gallery,o=n.indexOf(a),r=n[o+e];r&&(this.clearAnimationTimeouts(),this.resetAllGalleryImages(),this.isNavigating=!0,this.animateOldImage(e),this.animateNextImage(r,e),setTimeout(()=>{this.isNavigating=!1,this.handleUserActivity()},this.config.duration*1e3+100))}animateOldImage(e){const{image:t}=this.state;t.style.transitionDuration="",t.style.translate=`${this.getHidePosition(e)}px ${this.state.current.y}px`,t.classList.add(this.config.classes.zooming),setTimeout(()=>{t!==this.state.image&&this.resetImageState(t)},this.config.duration*1e3+50)}animateNextImage(e,t){this.gallery.currentIndex=this.gallery.images.indexOf(e),this.resetImageState(e);const a=e.getBoundingClientRect();this.state.image=e,this.state.rect=a,this.state.trigger=e.previousElementSibling,this.state.trigger.ariaExpanded="true",this.calculateZoom(a),this.showGalleryButtons(),this.updateCounter(),e.classList.add("lightbox-gallery");const{x:n,y:o,scale:r}=this.state.current,l=this.getHidePosition(t*-1);e.style.transitionDuration="0s",e.style.translate=`${l}px ${o}px`,e.style.scale=r,e.classList.add(this.config.classes.zooming),e.offsetHeight,e.style.transitionDuration="",e.style.translate=`${n}px ${o}px`,setTimeout(()=>{this.state.image===e&&e.classList.remove(this.config.classes.zooming)},this.config.duration*1e3)}resetImageState(e){if(!e)return;e.classList.remove(this.config.classes.zooming),e.classList.remove("lightbox-gallery"),e.style.cssText="",e.style.transition="none",e.offsetHeight,e.style.transition="";const t=e.previousElementSibling;t&&t.classList.contains(this.config.classes.trigger)&&(t.ariaExpanded="false")}resetAllGalleryImages(){!this.state.isGallery||!this.gallery.images||this.gallery.images.forEach(e=>{e!==this.state.image&&this.resetImageState(e)})}clearAnimationTimeouts(){this.animationTimeouts.forEach(e=>{clearTimeout(e)}),this.animationTimeouts.clear()}setAriaExpanded(e,...t){t.forEach(a=>{a&&(a.ariaExpanded=String(e))})}};function ut(i={imageSelector:"",gallerySelector:""}){const e=window.pvs;return!e||e.isLightboxDisabled()?null:new lt(i.imageSelector,i.gallerySelector)}const Ee=new Map;function dt(i,e,t){return Ee.set(`${i}:${e}`,t)}function ht(i,e){return Ee.get(`${i}:${e}`)}function ft(i){return i.replace(/#.*/,"")}async function gt(i,e=!0,t={}){const a=ft(i);if(e){const r=ht("ajax",a);if(r)return r}const n=await fetch(a,t);if(!n.ok)throw n.status;const o=await n.text();return dt("ajax",a,o),o}function mt(i){return new DOMParser().parseFromString(i,"text/html")}function q(i){const e=document.createElement("script");Array.from(i.attributes).forEach(t=>e.setAttribute(t.name,t.value)),i.innerHTML&&(e.innerHTML=i.innerHTML),i.replaceWith(e)}let _;function vt(){return _||(_=new MutationObserver(i=>{i.forEach(e=>{if(e.type==="childList"&&e.addedNodes.length)for(let t=e.addedNodes.length-1;t>=0;t--){const a=e.addedNodes[t];if(a.nodeType===Node.ELEMENT_NODE&&a.nodeName==="SPAN"&&a.parentElement===document.body&&a.attributes.length===0&&/^\d+(?:\s+\S+)*$/.test(a.textContent.trim())){a.remove();break}}})}),_.observe(document.body,{childList:!0,subtree:!1}),_)}function pt(){const i=document.head.getElementsByTagName("style");for(const e of i)if(e.textContent.trim().startsWith(".gh-portal-account-header{display:flex;flex-direction:column;align-items:center;margin:0 0 32px")){e.remove();break}}function bt(i){const e=i.querySelectorAll("script");if(e&&e.forEach(t=>{q(t)}),i.querySelector("[data-ghost-search]")){document.querySelectorAll("#sodo-search-root").forEach(a=>a.remove());const t=document.querySelector('script[src*="sodo-search"]');t&&q(t)}if(i.querySelector(".kg-video-card, .kg-audio-card, .kg-toggle-card, .kg-gallery-image")){const t=document.querySelector('script[src*="cards"]');t&&q(t)}if(i.querySelector('[data-lexical-signup-form], [data-members-form], [data-portal], [href*="#/portal"]')){const t=document.querySelector('script[src*="ghost/portal"]');t&&(document.querySelectorAll("#ghost-portal-root").forEach(a=>a.remove()),pt(),q(t))}if(i.querySelector("[data-ghost-comment-count]")){const t=document.querySelector('script[src*="comment-counts"]');t&&(vt(),q(t))}}const{on:yt,trigger:xe}=window.ivent;function fe(i){const e=i.getAttribute("href");if(!e){i.classList.remove("loading"),i.classList.add("complete"),i.classList.add("intersecting");return}i.classList.add("loading");const t=i.getAttribute("data-pagination-append")||i.getAttribute("data-pagination-prepend"),a=i.getAttribute("data-pagination-from")||t,n=i.hasAttribute("data-pagination-prepend")?"prepend":"append",o=document.querySelectorAll(t),r=`[data-pagination-${n}]`,l=i.getAttribute("data-pagination")==="infinite";gt(e).then(u=>{const h=mt(u),g=h.querySelector(a),d=g.parentNode.querySelector(r)?.getAttribute("href");o.forEach(p=>{const m={href:d,page:h,toSelector:t,fromSelector:a,insertPosition:n,insertTo:p,insertFrom:g,insertCallback:!1};xe(document,"pvs.pagination.render",{data:m,relatedTarget:i});const w=m.insertTo.parentNode.querySelector(r);w&&(w.classList.remove("loading"),m.href?w.setAttribute("href",m.href):(w.classList.add("complete"),w.classList.remove("intersecting"),w.removeAttribute("href"),m.insertPosition==="prepend"&&w.remove())),typeof m.insertCallback=="function"?m.insertCallback(m.insertTo,m.insertPosition,m.insertFrom.innerHTML):m.insertTo.insertAdjacentHTML(m.insertPosition==="prepend"?"afterbegin":"beforeend",m.insertFrom.innerHTML),bt(m.insertTo),xe(document,"pvs.pagination.rendered",{data:m,relatedTarget:i}),l&&w&&setTimeout(()=>{w.classList.contains("intersecting")&&w.getAttribute("href")&&!w.classList.contains("loading")&&fe(w)},100)})}).catch(u=>{u===404&&(i.removeAttribute("href"),i.classList.remove("loading"),i.classList.remove("intersecting"),i.classList.add("complete")),console.error(new Error("Failed to fetch page"))})}function wt(){yt(document,"click","[data-pagination][href]",t=>{t.preventDefault();const a=t.delegateTarget;a.classList.contains("loading")||(fe(a),a.getAttribute("data-pagination")==="load-more-infinite"&&a.setAttribute("data-pagination","infinite"))});const i=new IntersectionObserver((t,a)=>{try{t.forEach(n=>{if(!(!n.target||n.target.classList.contains("loading"))){if(!n.target.getAttribute("href")){a.disconnect();return}n.isIntersecting?(n.target.classList.add("intersecting"),fe(n.target)):n.target.classList.remove("intersecting")}})}catch(n){console.log(n)}},{rootMargin:"300px 0px"}),e=de(200,()=>{document.querySelectorAll('[data-pagination="infinite"][href]:not(.pvs-pagination-infinite-handled)').forEach(t=>{t.classList.add("pvs-pagination-infinite-handled"),i.observe(t)})});new MutationObserver(e).observe(document.documentElement,{childList:!0,subtree:!0})}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Ne=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],J=Ne.join(","),Ae=typeof Element>"u",D=Ae?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Q=!Ae&&Element.prototype.getRootNode?function(i){var e;return i==null||(e=i.getRootNode)===null||e===void 0?void 0:e.call(i)}:function(i){return i?.ownerDocument},ee=function i(e,t){var a;t===void 0&&(t=!0);var n=e==null||(a=e.getAttribute)===null||a===void 0?void 0:a.call(e,"inert"),o=n===""||n==="true",r=o||t&&e&&i(e.parentNode);return r},St=function(e){var t,a=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return a===""||a==="true"},ke=function(e,t,a){if(ee(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(J));return t&&D.call(e,J)&&n.unshift(e),n=n.filter(a),n},Le=function i(e,t,a){for(var n=[],o=Array.from(e);o.length;){var r=o.shift();if(!ee(r,!1))if(r.tagName==="SLOT"){var l=r.assignedElements(),u=l.length?l:r.children,h=i(u,!0,a);a.flatten?n.push.apply(n,h):n.push({scopeParent:r,candidates:h})}else{var g=D.call(r,J);g&&a.filter(r)&&(t||!e.includes(r))&&n.push(r);var d=r.shadowRoot||typeof a.getShadowRoot=="function"&&a.getShadowRoot(r),p=!ee(d,!1)&&(!a.shadowRootFilter||a.shadowRootFilter(r));if(d&&p){var m=i(d===!0?r.children:d.children,!0,a);a.flatten?n.push.apply(n,m):n.push({scopeParent:r,candidates:m})}else o.unshift.apply(o,r.children)}}return n},Ce=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},P=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||St(e))&&!Ce(e)?0:e.tabIndex},Tt=function(e,t){var a=P(e);return a<0&&t&&!Ce(e)?0:a},Et=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},De=function(e){return e.tagName==="INPUT"},xt=function(e){return De(e)&&e.type==="hidden"},Nt=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(a){return a.tagName==="SUMMARY"});return t},At=function(e,t){for(var a=0;a<e.length;a++)if(e[a].checked&&e[a].form===t)return e[a]},kt=function(e){if(!e.name)return!0;var t=e.form||Q(e),a=function(l){return t.querySelectorAll('input[type="radio"][name="'+l+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=a(window.CSS.escape(e.name));else try{n=a(e.name)}catch(r){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",r.message),!1}var o=At(n,e.form);return!o||o===e},Lt=function(e){return De(e)&&e.type==="radio"},Ct=function(e){return Lt(e)&&!kt(e)},Dt=function(e){var t,a=e&&Q(e),n=(t=a)===null||t===void 0?void 0:t.host,o=!1;if(a&&a!==e){var r,l,u;for(o=!!((r=n)!==null&&r!==void 0&&(l=r.ownerDocument)!==null&&l!==void 0&&l.contains(n)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!o&&n;){var h,g,d;a=Q(n),n=(h=a)===null||h===void 0?void 0:h.host,o=!!((g=n)!==null&&g!==void 0&&(d=g.ownerDocument)!==null&&d!==void 0&&d.contains(n))}}return o},Pe=function(e){var t=e.getBoundingClientRect(),a=t.width,n=t.height;return a===0&&n===0},Pt=function(e,t){var a=t.displayCheck,n=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=D.call(e,"details>summary:first-of-type"),r=o?e.parentElement:e;if(D.call(r,"details:not([open]) *"))return!0;if(!a||a==="full"||a==="legacy-full"){if(typeof n=="function"){for(var l=e;e;){var u=e.parentElement,h=Q(e);if(u&&!u.shadowRoot&&n(u)===!0)return Pe(e);e.assignedSlot?e=e.assignedSlot:!u&&h!==e.ownerDocument?e=h.host:e=u}e=l}if(Dt(e))return!e.getClientRects().length;if(a!=="legacy-full")return!0}else if(a==="non-zero-area")return Pe(e);return!1},Ft=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var a=0;a<t.children.length;a++){var n=t.children.item(a);if(n.tagName==="LEGEND")return D.call(t,"fieldset[disabled] *")?!0:!n.contains(e)}return!0}t=t.parentElement}return!1},te=function(e,t){return!(t.disabled||ee(t)||xt(t)||Pt(t,e)||Nt(t)||Ft(t))},ge=function(e,t){return!(Ct(t)||P(t)<0||!te(e,t))},$t=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},It=function i(e){var t=[],a=[];return e.forEach(function(n,o){var r=!!n.scopeParent,l=r?n.scopeParent:n,u=Tt(l,r),h=r?i(n.candidates):l;u===0?r?t.push.apply(t,h):t.push(l):a.push({documentOrder:o,tabIndex:u,item:n,isScope:r,content:h})}),a.sort(Et).reduce(function(n,o){return o.isScope?n.push.apply(n,o.content):n.push(o.content),n},[]).concat(t)},Ot=function(e,t){t=t||{};var a;return t.getShadowRoot?a=Le([e],t.includeContainer,{filter:ge.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:$t}):a=ke(e,t.includeContainer,ge.bind(null,t)),It(a)},Rt=function(e,t){t=t||{};var a;return t.getShadowRoot?a=Le([e],t.includeContainer,{filter:te.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):a=ke(e,t.includeContainer,te.bind(null,t)),a},R=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return D.call(e,J)===!1?!1:ge(t,e)},Mt=Ne.concat("iframe").join(","),me=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return D.call(e,Mt)===!1?!1:te(t,e)};/*!
* focus-trap 7.6.5
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function ve(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,a=Array(e);t<e;t++)a[t]=i[t];return a}function qt(i){if(Array.isArray(i))return ve(i)}function Bt(i,e,t){return(e=Kt(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function jt(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function zt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fe(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);e&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable})),t.push.apply(t,a)}return t}function $e(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fe(Object(t),!0).forEach(function(a){Bt(i,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Fe(Object(t)).forEach(function(a){Object.defineProperty(i,a,Object.getOwnPropertyDescriptor(t,a))})}return i}function Gt(i){return qt(i)||jt(i)||Zt(i)||zt()}function Ht(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var a=t.call(i,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Kt(i){var e=Ht(i,"string");return typeof e=="symbol"?e:e+""}function Zt(i,e){if(i){if(typeof i=="string")return ve(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ve(i,e):void 0}}var Ie={activateTrap:function(e,t){if(e.length>0){var a=e[e.length-1];a!==t&&a._setPausedState(!0)}var n=e.indexOf(t);n===-1||e.splice(n,1),e.push(t)},deactivateTrap:function(e,t){var a=e.indexOf(t);a!==-1&&e.splice(a,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},Ut=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Vt=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},B=function(e){return e?.key==="Tab"||e?.keyCode===9},Wt=function(e){return B(e)&&!e.shiftKey},Xt=function(e){return B(e)&&e.shiftKey},Oe=function(e){return setTimeout(e,0)},j=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return typeof e=="function"?e.apply(void 0,a):e},ie=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Yt=[],_t=function(e,t){var a=document,n=Yt,o=$e({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Wt,isKeyBackward:Xt},t),r={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},l,u=function(s,c,f){return s&&s[c]!==void 0?s[c]:o[f||c]},h=function(s,c){var f=typeof c?.composedPath=="function"?c.composedPath():void 0;return r.containerGroups.findIndex(function(b){var y=b.container,T=b.tabbableNodes;return y.contains(s)||f?.includes(y)||T.find(function(v){return v===s})})},g=function(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=c.hasFallback,b=f===void 0?!1:f,y=c.params,T=y===void 0?[]:y,v=o[s];if(typeof v=="function"&&(v=v.apply(void 0,Gt(T))),v===!0&&(v=void 0),!v){if(v===void 0||v===!1)return v;throw new Error("`".concat(s,"` was specified but was not a node, or did not return a node"))}var x=v;if(typeof v=="string"){try{x=a.querySelector(v)}catch(N){throw new Error("`".concat(s,'` appears to be an invalid selector; error="').concat(N.message,'"'))}if(!x&&!b)throw new Error("`".concat(s,"` as selector refers to no known node"))}return x},d=function(){var s=g("initialFocus",{hasFallback:!0});if(s===!1)return!1;if(s===void 0||s&&!me(s,o.tabbableOptions))if(h(a.activeElement)>=0)s=a.activeElement;else{var c=r.tabbableGroups[0],f=c&&c.firstTabbableNode;s=f||g("fallbackFocus")}else s===null&&(s=g("fallbackFocus"));if(!s)throw new Error("Your focus-trap needs to have at least one focusable element");return s},p=function(){if(r.containerGroups=r.containers.map(function(s){var c=Ot(s,o.tabbableOptions),f=Rt(s,o.tabbableOptions),b=c.length>0?c[0]:void 0,y=c.length>0?c[c.length-1]:void 0,T=f.find(function(N){return R(N)}),v=f.slice().reverse().find(function(N){return R(N)}),x=!!c.find(function(N){return P(N)>0});return{container:s,tabbableNodes:c,focusableNodes:f,posTabIndexesFound:x,firstTabbableNode:b,lastTabbableNode:y,firstDomTabbableNode:T,lastDomTabbableNode:v,nextTabbableNode:function(I){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,C=c.indexOf(I);return C<0?Z?f.slice(f.indexOf(I)+1).find(function(U){return R(U)}):f.slice(0,f.indexOf(I)).reverse().find(function(U){return R(U)}):c[C+(Z?1:-1)]}}}),r.tabbableGroups=r.containerGroups.filter(function(s){return s.tabbableNodes.length>0}),r.tabbableGroups.length<=0&&!g("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(r.containerGroups.find(function(s){return s.posTabIndexesFound})&&r.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},m=function(s){var c=s.activeElement;if(c)return c.shadowRoot&&c.shadowRoot.activeElement!==null?m(c.shadowRoot):c},w=function(s){if(s!==!1&&s!==m(document)){if(!s||!s.focus){w(d());return}s.focus({preventScroll:!!o.preventScroll}),r.mostRecentlyFocusedNode=s,Ut(s)&&s.select()}},F=function(s){var c=g("setReturnFocus",{params:[s]});return c||(c===!1?!1:s)},k=function(s){var c=s.target,f=s.event,b=s.isBackward,y=b===void 0?!1:b;c=c||ie(f),p();var T=null;if(r.tabbableGroups.length>0){var v=h(c,f),x=v>=0?r.containerGroups[v]:void 0;if(v<0)y?T=r.tabbableGroups[r.tabbableGroups.length-1].lastTabbableNode:T=r.tabbableGroups[0].firstTabbableNode;else if(y){var N=r.tabbableGroups.findIndex(function(be){var ye=be.firstTabbableNode;return c===ye});if(N<0&&(x.container===c||me(c,o.tabbableOptions)&&!R(c,o.tabbableOptions)&&!x.nextTabbableNode(c,!1))&&(N=v),N>=0){var I=N===0?r.tabbableGroups.length-1:N-1,Z=r.tabbableGroups[I];T=P(c)>=0?Z.lastTabbableNode:Z.lastDomTabbableNode}else B(f)||(T=x.nextTabbableNode(c,!1))}else{var C=r.tabbableGroups.findIndex(function(be){var ye=be.lastTabbableNode;return c===ye});if(C<0&&(x.container===c||me(c,o.tabbableOptions)&&!R(c,o.tabbableOptions)&&!x.nextTabbableNode(c))&&(C=v),C>=0){var U=C===r.tabbableGroups.length-1?0:C+1,Ve=r.tabbableGroups[U];T=P(c)>=0?Ve.firstTabbableNode:Ve.firstDomTabbableNode}else B(f)||(T=x.nextTabbableNode(c))}}else T=g("fallbackFocus");return T},L=function(s){var c=ie(s);if(!(h(c,s)>=0)){if(j(o.clickOutsideDeactivates,s)){l.deactivate({returnFocus:o.returnFocusOnDeactivate});return}j(o.allowOutsideClick,s)||s.preventDefault()}},A=function(s){var c=ie(s),f=h(c,s)>=0;if(f||c instanceof Document)f&&(r.mostRecentlyFocusedNode=c);else{s.stopImmediatePropagation();var b,y=!0;if(r.mostRecentlyFocusedNode)if(P(r.mostRecentlyFocusedNode)>0){var T=h(r.mostRecentlyFocusedNode),v=r.containerGroups[T].tabbableNodes;if(v.length>0){var x=v.findIndex(function(N){return N===r.mostRecentlyFocusedNode});x>=0&&(o.isKeyForward(r.recentNavEvent)?x+1<v.length&&(b=v[x+1],y=!1):x-1>=0&&(b=v[x-1],y=!1))}}else r.containerGroups.some(function(N){return N.tabbableNodes.some(function(I){return P(I)>0})})||(y=!1);else y=!1;y&&(b=k({target:r.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(r.recentNavEvent)})),w(b||r.mostRecentlyFocusedNode||d())}r.recentNavEvent=void 0},z=function(s){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r.recentNavEvent=s;var f=k({event:s,isBackward:c});f&&(B(s)&&s.preventDefault(),w(f))},G=function(s){(o.isKeyForward(s)||o.isKeyBackward(s))&&z(s,o.isKeyBackward(s))},$=function(s){Vt(s)&&j(o.escapeDeactivates,s)!==!1&&(s.preventDefault(),l.deactivate())},H=function(s){var c=ie(s);h(c,s)>=0||j(o.clickOutsideDeactivates,s)||j(o.allowOutsideClick,s)||(s.preventDefault(),s.stopImmediatePropagation())},Ze=function(){if(r.active)return Ie.activateTrap(n,l),r.delayInitialFocusTimer=o.delayInitialFocus?Oe(function(){w(d())}):w(d()),a.addEventListener("focusin",A,!0),a.addEventListener("mousedown",L,{capture:!0,passive:!1}),a.addEventListener("touchstart",L,{capture:!0,passive:!1}),a.addEventListener("click",H,{capture:!0,passive:!1}),a.addEventListener("keydown",G,{capture:!0,passive:!1}),a.addEventListener("keydown",$),l},Ue=function(){if(r.active)return a.removeEventListener("focusin",A,!0),a.removeEventListener("mousedown",L,!0),a.removeEventListener("touchstart",L,!0),a.removeEventListener("click",H,!0),a.removeEventListener("keydown",G,!0),a.removeEventListener("keydown",$),l},Si=function(s){var c=s.some(function(f){var b=Array.from(f.removedNodes);return b.some(function(y){return y===r.mostRecentlyFocusedNode})});c&&w(d())},pe=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(Si):void 0,K=function(){pe&&(pe.disconnect(),r.active&&!r.paused&&r.containers.map(function(s){pe.observe(s,{subtree:!0,childList:!0})}))};return l={get active(){return r.active},get paused(){return r.paused},activate:function(s){if(r.active)return this;var c=u(s,"onActivate"),f=u(s,"onPostActivate"),b=u(s,"checkCanFocusTrap");b||p(),r.active=!0,r.paused=!1,r.nodeFocusedBeforeActivation=m(a),c?.();var y=function(){b&&p(),Ze(),K(),f?.()};return b?(b(r.containers.concat()).then(y,y),this):(y(),this)},deactivate:function(s){if(!r.active)return this;var c=$e({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},s);clearTimeout(r.delayInitialFocusTimer),r.delayInitialFocusTimer=void 0,Ue(),r.active=!1,r.paused=!1,K(),Ie.deactivateTrap(n,l);var f=u(c,"onDeactivate"),b=u(c,"onPostDeactivate"),y=u(c,"checkCanReturnFocus"),T=u(c,"returnFocus","returnFocusOnDeactivate");f?.();var v=function(){Oe(function(){T&&w(F(r.nodeFocusedBeforeActivation)),b?.()})};return T&&y?(y(F(r.nodeFocusedBeforeActivation)).then(v,v),this):(v(),this)},pause:function(s){return r.active?(r.manuallyPaused=!0,this._setPausedState(!0,s)):this},unpause:function(s){return r.active?(r.manuallyPaused=!1,n[n.length-1]!==this?this:this._setPausedState(!1,s)):this},updateContainerElements:function(s){var c=[].concat(s).filter(Boolean);return r.containers=c.map(function(f){return typeof f=="string"?a.querySelector(f):f}),r.active&&p(),K(),this}},Object.defineProperties(l,{_isManuallyPaused:{value:function(){return r.manuallyPaused}},_setPausedState:{value:function(s,c){if(r.paused===s)return this;if(r.paused=s,s){var f=u(c,"onPause"),b=u(c,"onPostPause");f?.(),Ue(),K(),b?.()}else{var y=u(c,"onUnpause"),T=u(c,"onPostUnpause");y?.(),p(),Ze(),K(),T?.()}return this}}}),l.updateContainerElements(e),l};const Jt={showClass:"popup-show",hideClass:"popup-hide",bodyOverflow:!0,focusDuration:100};function Qt(i={}){const{on:e,trigger:t}=window.ivent,a={...Jt,...i},n=new Map;e(document,"click","[data-popup-toggle]",r=>{r.preventDefault();const l=r.delegateTarget,u=l.getAttribute("data-popup-toggle").slice(1),h=document.querySelector(`[data-popup-id="${u}"]`);n.has(u)||n.set(u,{toggle:l,popup:h,focusTrap:_t(h),focusTrapTimeout:null});const g=n.get(u);t(document,"pvs.popup.show",{relatedTarget:h,data:{id:u,toggle:l}}),h.classList.remove(a.hideClass),h.offsetHeight,h.classList.add(a.showClass),h.setAttribute("aria-hidden","false"),l.setAttribute("aria-expanded","true"),t(document,"pvs.popup.shown",{relatedTarget:h,data:{id:u,toggle:l}});const d=setTimeout(()=>{g.focusTrap?.activate()},a.focusDuration);g.focusTrapTimeout=d,a.bodyOverflow&&document.body.style.setProperty("overflow","hidden")});function o(r){if(!r.classList.contains(a.showClass))return;const l=r.getAttribute("data-popup-id"),u=n.get(l),h=u.toggle;t(document,"pvs.popup.hide",{relatedTarget:r,data:{id:l,toggle:h}}),r.classList.remove(a.showClass),r.offsetHeight,r.classList.add(a.hideClass),r.setAttribute("aria-hidden","true"),h.setAttribute("aria-expanded","false"),t(document,"pvs.popup.hidden",{relatedTarget:r,data:{id:l,toggle:h}}),clearTimeout(u.focusTrapTimeout),u.focusTrap?.deactivate(),document.body.style.setProperty("overflow","")}e(document,"click",".popup-close",r=>{r.preventDefault(),o(r.delegateTarget.closest(".popup"))}),e(document,"keyup",r=>{r.key==="Escape"&&n.forEach(({popup:l})=>{o(l)})}),e(document,"pvs.navigation.content-render",()=>{n.forEach(({popup:r})=>{o(r)}),n.clear()})}function ei(i){const e=parseFloat(i.getAttribute("data-pricing-month")),t=parseFloat(i.getAttribute("data-pricing-year"))/12,a=Math.round((e-t)/e*100);return a<1?0:a}function Re(){document.querySelectorAll(".pricing-discount > span").forEach(i=>{i.setAttribute("data-pricing-discount",ei(i))})}function ti(){const{on:i}=window.ivent;Re(),i(document,"ready pvs.navigation.content-rendered",Re)}function Me(i){const e=new URL(window.location.href);e.searchParams.set("pricing",i),window.history.replaceState({},"",e)}function ii(){const i=new URLSearchParams(window.location.search).get("pricing");i&&document.querySelectorAll(".pricing-toggle-input").forEach(e=>{e.checked=i===e.value,e.checked&&Me(e.value)}),window.ivent.on(document,"focus",".pricing-toggle-input",e=>{Me(e.delegateTarget.value)})}function ai(i,e,t){return(1-t)*i+t*e}function ni(i,e){let t=new Date().getTime();const a=1e3/e;return function n(){requestAnimationFrame(n);const o=new Date().getTime(),r=o-t;r>a&&(t=o-r%a,i())}()}function ri(i,e=1){const t=10**e;return Math.round(i*t)/t}const{on:oi}=window.ivent,si={selector:".scroll-progress"};function ci(){const i=window.scrollY,e=document.documentElement.scrollHeight-document.documentElement.clientHeight;return Math.max(0,Math.min(100,i/e*100))}function li(i){const e={...si,...i},{selector:t}=e;let a=document.querySelectorAll(t);if(!a)return;let n=null;function o(){const r=ci(),l=ai(n===null?r:n,r,.25);l!==n&&(n=l,a.forEach(u=>{u.style.setProperty("--scroll-progress",`${ri(n,2)}%`)}))}ni(o,60),oi(document,"pvs.navigation.content-rendered pvs.filter.rendered pvs.pagination.rendered",()=>{a=document.querySelectorAll(t)})}function ui(){const i=window.innerWidth-document.body.offsetWidth||parseFloat(window.getComputedStyle(document.body).paddingRight);return i?`${i}px`:""}function ae(){document.body.style.setProperty("--scrollbar-width",ui())}function di(){const{on:i}=window.ivent;ae(),i(window,"resize",he(100,ae)),i(window,"orientationchange",ae),i(document,"pvs.navigation.content-rendered pvs.pagination.rendered",ae)}const{on:qe}=window.ivent,Be=new Set,je=new Set,ze=i=>{i.forEach(e=>e())},hi=de(200,()=>ze(Be)),fi=he(200,()=>ze(je)),Ge=()=>{hi(),fi()};qe(window,"scroll",Ge,{passive:!0}),qe(window,"orientationchange",Ge);function gi(i){Be.add(i)}function mi(i){je.add(i)}const{on:ne,trigger:He}=window.ivent,vi={initialized:!1,tocSelector:".toc",tocScrollSelector:".toc-scroll",toggleSelector:".toc-button",unlockLinkSelector:".toc-unlock-link",lockedPostTeaserSelector:".post-content-teaser",headingsSelector:".post-content > :where(h1, h2, h3)",tocHandledClassName:"toc-handled",activeLinkClassName:"active"};function Ke(i){return i.getBoundingClientRect().height}function pi(i){const e=document.createElement("ul"),t=[{level:0,element:e}];return i.forEach(a=>{const n=parseInt(a.tagName.charAt(1)),o=document.createElement("li"),r=document.createElement("a");for(r.textContent=a.getAttribute("data-heading-label")||a.textContent,r.href=`#${a.id}`,o.appendChild(r);t.length>1&&t[t.length-1].level>=n;)t.pop();const l=t[t.length-1].element;if(i.some(u=>parseInt(u.tagName.charAt(1))>n)){const u=document.createElement("ul");o.appendChild(u),l.appendChild(o),t.push({level:n,element:u})}else l.appendChild(o),t.push({level:n,element:l})}),e}function bi(i){const e=document.querySelector(i.tocSelector);if(!e||e.classList.contains(i.tocHandledClassName))return;e.classList.add(i.tocHandledClassName);const t=Array.from(document.querySelectorAll(i.headingsSelector));if(!t.length)return;if(e.classList.contains("toc-hidden")){const g=pi(t),d=e.querySelector(i.unlockLinkSelector);if(d)if(document.querySelector(i.lockedPostTeaserSelector)){const p=document.createElement("li");d.style.display="",p.appendChild(d),g.appendChild(p)}else d.remove();e.appendChild(g),e.classList.remove("toc-hidden")}const a=t.map(g=>({heading:g,link:e.querySelector(`[href="#${g.id}"]`)})),n=i.tocScrollSelector?e.closest(i.tocScrollSelector):null,o=parseFloat(window.getComputedStyle(a[0].heading).scrollMarginTop),r=g=>Math.round(g.getBoundingClientRect().top-o);let l=!1;const u=()=>{a.forEach(({heading:g,link:d},p)=>{const m=a[p+1]?.heading;if(m&&r(g)<=0&&r(m)>0||!m&&r(g)<=0){if(d.classList.contains(i.activeLinkClassName))return;d.classList.add(i.activeLinkClassName),He(document,"pvs.toc.activated-link",{relatedTarget:d}),l=d}else d.classList.remove(i.activeLinkClassName),He(document,"pvs.toc.deactivated-link",{relatedTarget:d}),l===d&&(l=!1)})},h=()=>{if(!n||!l)return;const g=n.getBoundingClientRect(),d=l.getBoundingClientRect(),p=g.height/2,m=d.top-g.top+n.scrollTop+d.height/2;n.scrollTo({top:m-p,behavior:"smooth"}),l=!1};gi(()=>{u()}),ne(window,"load",()=>{u()}),mi(()=>{h()}),ne(window,"load",()=>{h()})}function yi(i){let e=!1;const t=(a,n,o)=>{if(e)return;e=!0;const r=a.querySelector("ul"),l=Ke(a);o&&n.setAttribute("aria-expanded",o);const u=Ke(r);a.style.height=`${l}px`,a.offsetHeight,requestAnimationFrame(()=>{a.style.height=o?`${l+u}px`:`${l-u}px`,setTimeout(()=>{o||n.setAttribute("aria-expanded",o),a.style.height="",e=!1},300)})};ne(document,"click",i.toggleSelector,a=>{a.preventDefault();const n=a.delegateTarget,o=document.querySelector(i.tocSelector),r=n.getAttribute("aria-expanded")==="false";t(o,n,r)})}function wi(i={}){const e=window.pvs;if(!e)return;let t=!1;ne(document,"ready pvs.navigation.content-rendered",()=>{const a={...vi,...i,...e.getTOCUserOptions()};(a.initialized||document.body.classList.contains("tag-hash-toc"))&&(bi(a),!t&&a.toggleSelector&&(t=!0,yi(a)))})}const E=window.pvs;E&&(E.initDarkMode=Je,E.getSelectedColorScheme=oe,E.getSystemColorScheme=se,E.getActualColorScheme=ce,E.updateColorScheme=W,E.initClipboard=We,E.initLightbox=ut,E.initPopup=Qt,E.initScrollProgress=li,E.initScrollbarWidth=di,E.initPagination=wt,E.initCollapse=Ye,E.initDropdown=et,E.initPricingDiscount=ti,E.initPricingUrlSync=ii,E.registerFeaturedVideo=st,E.registerFeaturedVideoPreview=ct,E.registerTOC=wi)});
